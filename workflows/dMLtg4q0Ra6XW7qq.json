{"updatedAt":"2025-11-28T08:20:51.711Z","createdAt":"2025-08-21T07:20:45.275Z","id":"dMLtg4q0Ra6XW7qq","name":"Flo ideas dump","active":true,"isArchived":false,"nodes":[{"parameters":{"resource":"message","operation":"getAll","guildId":{"__rl":true,"value":"854285298476646421","mode":"list","cachedResultName":"Bunkerity","cachedResultUrl":"https://discord.com/channels/854285298476646421"},"channelId":{"__rl":true,"value":"1438910656307789965","mode":"id"},"options":{"simplify":true}},"type":"n8n-nodes-base.discord","typeVersion":2,"position":[16,-1008],"id":"fe1304c5-9a04-41ac-9abd-3e540f9219d1","name":"Get messages","webhookId":"5134460a-401b-443b-b90e-138de76ef58a","credentials":{"discordBotApi":{"id":"uNaipVUGxj7joc9H","name":"BunkerBot - Prod"}}},{"parameters":{"authentication":"webhook","content":"={{ $('AI Agent').item.json.output }}","options":{}},"type":"n8n-nodes-base.discord","typeVersion":2,"position":[6976,-1136],"id":"8d0268b9-8b5e-4831-b9d8-a18ed9aa53d1","name":"Send message to tech","webhookId":"8a363a11-898a-4ee2-9103-b5fa7e072f25","credentials":{"discordWebhookApi":{"id":"ATIBYRCogmAtLDyA","name":"Discord Webhook - tech (flo dump)"}}},{"parameters":{"sortFieldsUi":{"sortField":[{"fieldName":"timestamp"}]},"options":{}},"type":"n8n-nodes-base.sort","typeVersion":1,"position":[464,-1008],"id":"8852b5f8-8f80-4cf5-824d-c5acc285de28","name":"Sort by date"},{"parameters":{"options":{"systemMessage":"## ðŸ§  RÃ´le\n\nTu es **BunkerTasks**, agent spÃ©cialisÃ© dans la **transformation de discussions Discord en tÃ¢ches actionnables**, destinÃ©es aux Ã©quipes **tech Bunkerity** (Ã©diteur du WAF open source **BunkerWeb**).\n\nTu tâ€™appuies uniquement sur :\n\n* **La documentation officielle BunkerWeb** (rÃ©fÃ©rence unique autorisÃ©e).\n* Un **outil de rÃ©flexion/planification (*think*)**, que tu dois\n  **obligatoirement utiliser AVANT chaque rÃ©ponse** et dÃ¨s que le contexte Ã©volue.\n* Un **outil dâ€™extraction Discord** te permettant :\n\n  * de rÃ©cupÃ©rer un message unique,\n  * de rÃ©cupÃ©rer un ensemble de messages dans un salon,\n  * de traiter un message rÃ©fÃ©rencÃ© via un lien Discord,\n  * de rÃ©cupÃ©rer les messages dâ€™un thread complet.\n\n---\n\n## ðŸ”¥ RÃ¨gle critique â€“ Threads & Mentions\n\nSi un message mentionnÃ© (via lien Discord) renvoie Ã  un thread ou invite Ã  Â« aller lire le fil Â» :\n\n1. RÃ©cupÃ¨re le message mentionnÃ©.\n2. DÃ©duis sâ€™il appartient Ã  un thread.\n3. RÃ©cupÃ¨re lâ€™intÃ©gralitÃ© du thread.\n4. Si nÃ©cessaire â†’ rÃ©cupÃ¨re aussi les messages du canal parent.\n5. Si cela modifie le contexte â†’ relance immÃ©diatement une nouvelle Ã©tape *think* (sans jamais le dire).\n\n**Aucune invention** : si une information concerne BunkerWeb et nâ€™est pas vÃ©rifiable â†’ consulter la documentation.\n\n---\n\n# ðŸŽ¯ Mission\n\nPour chaque lot de messages Discord, tu dois :\n\n1. **Analyser profondÃ©ment** le contexte, la logique mÃ©tier, le besoin technique et lâ€™impact sur les tÃ¢ches.\n2. **Toujours utiliser lâ€™outil *think*** pour organiser ta rÃ©flexion avant de rÃ©diger.\n3. **Identifier clairement** :\n\n   * faits techniques,\n   * dÃ©cisions,\n   * Ã©lÃ©ments ambigus,\n   * risques,\n   * dÃ©pendances,\n   * **tÃ¢ches actionnables pour lâ€™Ã©quipe tech.**\n4. Produire un contenu **directement exploitable** pour la crÃ©ation de tickets (Jira, GitHub, Linearâ€¦).\n5. Rester strictement dans le pÃ©rimÃ¨tre **Bunkerity / BunkerWeb**.\n\n---\n\n# ðŸ‘¥ RÃ¨gles dâ€™assignation automatique (si personne nâ€™est explicitement mentionnÃ©)\n\nSi les messages ne prÃ©cisent **aucun destinataire**, alors :\n\n| Domaine                                             | AssignÃ© par dÃ©faut |\n| --------------------------------------------------- | ------------------ |\n| DÃ©veloppement / BunkerWeb / Produit / Documentation | **ThÃ©ophile**      |\n| Cloud / Infrastructure / DevOps                     | **AurÃ©lien**       |\n| Organisation / Communication / Direction            | **Florian**        |\n\nLorsque tu gÃ©nÃ¨res les tÃ¢ches, dÃ©duis lâ€™assignataire selon ces rÃ¨gles.\n\n---\n\n# ðŸ§© Format de sortie\n\n## 1. Contexte (2â€“3 phrases max)\n\nRÃ©sumÃ© minimal permettant de comprendre le sujet et le composant impliquÃ©.\n\n---\n\n## 2. Points clÃ©s / DÃ©cisions\n\n* Liste synthÃ©tique (3â€“8 points).\n* Indiquer :\n\n  * **Â« Selon la documentation BunkerWebâ€¦ Â»** pour un point vÃ©rifiÃ©.\n  * **Â« AmbiguÃ¯tÃ© dÃ©tectÃ©e : â€¦ Â»** lorsquâ€™il manque des informations.\n\n---\n\n## 3. Actions Ã  mener (PRIORITÃ‰ â€” format orientÃ© tickets)\n\nPour chaque tÃ¢che, utiliser ce format clair et copiable :\n\n---\n\n### **[TÃ‚CHE #n]**\n\n* **Type** : `bug` | `feature` | `tech_debt` | `investigation` | `documentation` | `support`\n* **AssignÃ© Ã ** :\n\n  * si mention explicite â†’ personne indiquÃ©e\n  * sinon â†’ appliquer les rÃ¨gles dâ€™assignation automatiques\n* **Titre** : phrase courte et explicite\n* **Description** :\n\n  * contexte technique / fonctionnel\n  * travail attendu\n  * si possible : scÃ©nario utilisateur ou exemple\n* **Composant concernÃ©** : ex. `WAF core`, `dashboard`, `installer`, `CI/CD`, `docs`, etc.\n* **PrioritÃ©** : `haute` | `moyenne` | `basse`\n* **DÃ©pendances / PrÃ©-requis**\n* **CritÃ¨res dâ€™acceptation**\n* **Questions ouvertes** (si nÃ©cessaire)\n\n---\n\nSi aucune action ne ressort :\n\n> **Â« Aucune action explicite. Â»**\n\n---\n\n## 4. Risques / Blocages\n\nSeulement ceux **explicitement mentionnÃ©s ou clairement dÃ©ductibles**.\nIndique leur impact potentiel (technique, sÃ©curitÃ©, support, UX, planningâ€¦).\n\n---\n\n## 5. SynthÃ¨se en 1 phrase\n\nPhrase finale rÃ©sumant **lâ€™essentiel Ã  destination des Ã©quipes tech**.\n\n---\n\n# ðŸ§  Contraintes\n\n* **Utilisation obligatoire** de lâ€™outil *think* avant toute rÃ©ponse.\n* Ne jamais mentionner lâ€™usage de cet outil.\n* Ton : professionnel, technique, direct, orientÃ© exÃ©cution.\n* Toujours hiÃ©rarchiser :\n  **Actions > Risques > Points clÃ©s > Contexte**\n* Mentionner toute incertitude : **Â« AmbiguÃ¯tÃ© dÃ©tectÃ©e : â€¦ Â»**"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[1392,-1008],"id":"05f58be7-00f3-4cab-8865-21ba4aef306a","name":"AI Agent"},{"parameters":{"mode":"retrieve-as-tool","toolDescription":"Get related chunks of the official BunkerWeb documentation.","tableName":"doc_embeddings","topK":1,"options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStorePGVector","typeVersion":1.3,"position":[1168,-784],"id":"a430604d-32ba-44b4-bdb0-a05ca06922d8","name":"BunkerWeb documentation","credentials":{"postgres":{"id":"epaaIS42N6tUKW8x","name":"Postgres container"}}},{"parameters":{"model":"text-embedding-3-small","options":{}},"type":"@n8n/n8n-nodes-langchain.embeddingsAzureOpenAi","typeVersion":1,"position":[1248,-576],"id":"bd4901b3-4d1f-43c0-8068-e9a7d38f03b2","name":"text-embedding-3-small","credentials":{"azureOpenAiApi":{"id":"b3h2PflJB1VhEfVA","name":"Azure Open AI Embedding - bunkerity"}}},{"parameters":{"description":"Think about you're about to say.\nIf necessary read the documentation for more information."},"type":"@n8n/n8n-nodes-langchain.toolThink","typeVersion":1.1,"position":[1456,-784],"id":"e58594cd-8bee-492a-8cf6-4719d3a0b578","name":"Think"},{"parameters":{"query":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Query', ``, 'string') }}","options":{}},"type":"@tavily/n8n-nodes-tavily.tavilyTool","typeVersion":1,"position":[1584,-784],"id":"6afddd29-6951-4b9b-9181-4b11a6eb98e2","name":"Tavily","credentials":{"tavilyApi":{"id":"uy9TeiO4FnYJt9nC","name":"Tavily account - Bunkerity"}}},{"parameters":{"jsCode":"// Ce script suppose que chaque item entrant est UN message Discord.\n// Il formate tous les messages dans un texte unique en franÃ§ais.\n\nconst items = $input.all();\n\nconst blocks = items.map((item) => {\n  const msg = item.json;\n  const author = msg.author || {};\n\n  // Nom d'affichage si disponible, sinon username\n  const username =\n    author.global_name || author.username || \"Utilisateur inconnu\";\n\n  // Format de date en franÃ§ais (Fuseau horaire France)\n  const date = new Date(msg.timestamp);\n  const formattedDate = date.toLocaleString(\"fr-FR\", {\n    timeZone: \"Europe/Paris\",\n    year: \"numeric\",\n    month: \"2-digit\",\n    day: \"2-digit\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n  });\n\n  const content = msg.content || \"\";\n\n  return `${username} a dit le ${formattedDate} :\\n${content}\\n---`;\n});\n\n// Fusion des messages\nconst merged = blocks.join(\"\\n\");\n\nreturn {\n  json: {\n    chatInput: merged,\n  },\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[688,-1008],"id":"3c5ca6ee-11d4-46cd-97cc-4f6ce445bd78","name":"Format messages"},{"parameters":{"authentication":"webhook","content":"## ðŸ’¾ New Flo dump","options":{},"files":{"values":[{}]}},"type":"n8n-nodes-base.discord","typeVersion":2,"position":[7200,-1328],"id":"944464fe-a3ec-47e1-8b65-84215e693039","name":"Send file to tech","webhookId":"8a363a11-898a-4ee2-9103-b5fa7e072f25","credentials":{"discordWebhookApi":{"id":"ATIBYRCogmAtLDyA","name":"Discord Webhook - tech (flo dump)"}}},{"parameters":{"operation":"toText","sourceProperty":"output","options":{"fileName":"dump.md"}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[2272,-1328],"id":"a9b5e9b7-453a-4df6-ba9e-36260adfdc29","name":"Convert to File"},{"parameters":{"rule":{"interval":[{"field":"weeks","triggerAtDay":[5],"triggerAtHour":7}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-432,-1008],"id":"350b3b34-410f-4919-9de6-f27745cc62a3","name":"Every friday at 2pm"},{"parameters":{"model":"model-router","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatAzureOpenAi","typeVersion":1,"position":[912,-784],"id":"23c69a83-cfb3-4ba5-b80d-adfbd50c2189","name":"model-router","credentials":{"azureOpenAiApi":{"id":"mETD70EE7rTRYtAY","name":"Azure Router - Bunkerity"}}},{"parameters":{"assignments":{"assignments":[{"id":"a833bac7-5a5c-4181-afef-3b63178baa55","name":"content","value":"## ðŸ§  RÃ´le  Tu es **BunkerSummary**, agent spÃ©cialisÃ© dans la synthÃ¨se de **messages liÃ©s Ã  des tÃ¢ches** pour **Bunkerity** (Ã©diteur du WAF open source **BunkerWeb**).  Tu as accÃ¨s Ã  :  * **La documentation officielle BunkerWeb** (seule source autorisÃ©e). * Un **outil de rÃ©flexion/planification** que tu dois **toujours utiliser avant de rÃ©diger**. * Un **outil de recherche externe**, pour les informations **hors BunkerWeb uniquement**.  Aucune invention : si un point touche BunkerWeb et nâ€™est pas confirmÃ© â†’ tu **consultes la doc**.  ---  ## ðŸŽ¯ Mission  Pour chaque lot de messages Discord (Markdown possible) :  1. **Analyser profondÃ©ment** le contexte, la logique mÃ©tier, lâ€™intention et lâ€™impact sur les tÃ¢ches. 2. **Planifier et structurer** systÃ©matiquement ta rÃ©flexion avant dâ€™Ã©crire. 3. **Identifier** : faits, Ã©lÃ©ments techniques, dÃ©cisions, questions, ambiguÃ¯tÃ©s, risques, **tÃ¢ches**. 4. **SynthÃ©tiser** en un rÃ©sumÃ© **clair, bref, exploitable**, orientÃ© **gestion de tÃ¢ches**. 5. Rester dans le cadre Bunkerity/BunkerWeb (WAF NG, NGINX/ModSecurity, cloud-native, OWASP CRS, ClamAV, CrowdSec, Docker/K8s, DevOps, communautÃ© & entreprise).  ---  ## ðŸ§© Format de sortie  1. **Contexte** (2â€“3 phrases max, si prÃ©sent). 2. **Faits / Points importants** (3â€“8 bullets). 3. **Actions Ã  mener (PRIORITÃ‰)**     * TÃ¢ches prÃ©cises et actionnables.    * Si aucune â†’ â€œ**Aucune action explicite.**â€ 4. **Risques / Blocages** (seulement ceux mentionnÃ©s). 5. **SynthÃ¨se 1-phrase**.  ---  ## ðŸ§  Contraintes  * **Toujours** rÃ©flÃ©chir et planifier avant dâ€™Ã©crire (mais **ne jamais le mentionner**). * Ton : professionnel, technique, direct, concis. * **Strictement â‰¤ 2000 caractÃ¨res (espaces compris)**. * Signaler toute incertitude : â€œ**AmbiguÃ¯tÃ© dÃ©tectÃ©e : â€¦**â€. * Si un point est validÃ© par la doc : â€œ**Selon la documentation BunkerWebâ€¦**â€. * Jamais de redondance, prioritÃ© :   **Actions > Risques > Points clÃ©s > Contexte**. * Pas de mention des outils utilisÃ©s.","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-432,-576],"id":"d21bc80e-89a6-4a54-aecc-f6abacb8e92d","name":"Original prompt"},{"parameters":{"resource":"message","operation":"getAll","guildId":{"__rl":true,"value":"854285298476646421","mode":"list","cachedResultName":"Bunkerity","cachedResultUrl":"https://discord.com/channels/854285298476646421"},"channelId":{"__rl":true,"value":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Channel', `The channel id is usually provided in the content of one of the messages`, 'string') }}","mode":"id"},"options":{"simplify":true}},"type":"n8n-nodes-base.discordTool","typeVersion":2,"position":[1712,-784],"id":"04c8fc09-ffe8-46f0-abd6-f71a27486bd4","name":"Get multiple messages","webhookId":"61b654cc-6fe2-4ea7-9892-92e5f6f33b0b","credentials":{"discordBotApi":{"id":"uNaipVUGxj7joc9H","name":"BunkerBot - Prod"}}},{"parameters":{"resource":"message","operation":"get","guildId":{"__rl":true,"value":"854285298476646421","mode":"list","cachedResultName":"Bunkerity","cachedResultUrl":"https://discord.com/channels/854285298476646421"},"channelId":{"__rl":true,"value":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Channel', `The channel id is usually provided in the content of one of the messages`, 'string') }}","mode":"id"},"messageId":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message_ID', `The message id is usually provided in the content of one of the messages`, 'string') }}","options":{"simplify":true}},"type":"n8n-nodes-base.discordTool","typeVersion":2,"position":[1840,-784],"id":"76442208-816b-43bf-b376-234763ce4bc5","name":"Get one message","webhookId":"c7d1bd30-82b7-4f31-a185-2823085be459","credentials":{"discordBotApi":{"id":"uNaipVUGxj7joc9H","name":"BunkerBot - Prod"}}},{"parameters":{"resource":"message","operation":"sendAndWait","guildId":{"__rl":true,"value":"854285298476646421","mode":"list","cachedResultName":"Bunkerity","cachedResultUrl":"https://discord.com/channels/854285298476646421"},"channelId":{"__rl":true,"value":"1438910656307789965","mode":"id"},"message":"=<@854284951273078814> que penses-tu du **Flo dump** de la semaine ?\nhttps://discord.com/channels/854285298476646421/{{ $('Send review file to flo-dump').item.json.channel_id || $('Send review message to flo-dump').item.json.channel_id }}/{{ $('Send review file to flo-dump').item.json.id || $('Send review message to flo-dump').item.json.id }}","approvalOptions":{"values":{"approvalType":"double","approveLabel":"âœ“ Accepter","disapproveLabel":"âœ— Revoir"}},"options":{"limitWaitTime":{"values":{"limitType":"atSpecifiedTime","maxDateAndTime":"={{ $now.startOf(\"day\").plus(\"14\", \"hours\") }}"}},"appendAttribution":false}},"type":"n8n-nodes-base.discord","typeVersion":2,"position":[3840,-1248],"id":"d70cae5b-0a2e-4c75-a940-f07fcc94edca","name":"Review the dump","webhookId":"f612d56d-9e45-494a-8559-d5b6fbd4c8c1","credentials":{"discordBotApi":{"id":"uNaipVUGxj7joc9H","name":"BunkerBot - Prod"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"0db5c99e-26c3-4e63-b29a-d0055d9ed532","leftValue":"={{ $json.output.length }}","rightValue":1900,"operator":{"type":"number","operation":"gte"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[2048,-1248],"id":"dabca88a-154b-4e60-843f-32d5e3bed76a","name":"If message is over 1900 chars"},{"parameters":{"resource":"message","guildId":{"__rl":true,"value":"854285298476646421","mode":"list","cachedResultName":"Bunkerity","cachedResultUrl":"https://discord.com/channels/854285298476646421"},"channelId":{"__rl":true,"value":"1438910656307789965","mode":"list","cachedResultName":"ðŸ’¾ãƒ»flo-dump","cachedResultUrl":"https://discord.com/channels/854285298476646421/1438910656307789965"},"content":"=## Revision {{ $json.revisions || 1 }}\n\n{{ $('AI Agent').item.json.output }}","options":{}},"type":"n8n-nodes-base.discord","typeVersion":2,"position":[3168,-944],"id":"b97e9dc3-5fdb-438f-a1d2-ed16d6c71afd","name":"Send review message to flo-dump","webhookId":"8a363a11-898a-4ee2-9103-b5fa7e072f25","credentials":{"discordBotApi":{"id":"uNaipVUGxj7joc9H","name":"BunkerBot - Prod"}}},{"parameters":{"resource":"message","guildId":{"__rl":true,"value":"854285298476646421","mode":"list","cachedResultName":"Bunkerity","cachedResultUrl":"https://discord.com/channels/854285298476646421"},"channelId":{"__rl":true,"value":"1438910656307789965","mode":"list","cachedResultName":"ðŸ’¾ãƒ»flo-dump","cachedResultUrl":"https://discord.com/channels/854285298476646421/1438910656307789965"},"content":"=## ðŸ’¾ Flo dump - Revision {{ $json.revisions || 1 }}","options":{},"files":{"values":[{}]}},"type":"n8n-nodes-base.discord","typeVersion":2,"position":[3168,-1328],"id":"c17d375f-07e6-4b66-be26-009342423b7b","name":"Send review file to flo-dump","webhookId":"8a363a11-898a-4ee2-9103-b5fa7e072f25","credentials":{"discordBotApi":{"id":"uNaipVUGxj7joc9H","name":"BunkerBot - Prod"}}},{"parameters":{"sessionIdType":"customKey","sessionKey":"=review_flo_dump_{{ $now.format('yyyy-MM-dd') }}","sessionTTL":86400,"contextWindowLength":20},"type":"@n8n/n8n-nodes-langchain.memoryRedisChat","typeVersion":1.5,"position":[1040,-784],"id":"7f266231-70f0-4b3d-9bea-9941a28cd1fa","name":"Review memory","credentials":{"redis":{"id":"AfgIqWjfLKZzroBz","name":"Redis db 1"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"loose","version":2},"conditions":[{"id":"f8aad714-1b70-4e8a-bd91-1e69d6f9fd5f","leftValue":"={{ $json.timestamp }}","rightValue":"={{ $now.minus(1, \"week\") }}","operator":{"type":"dateTime","operation":"after"}},{"id":"9babae15-7393-46e9-ac09-461c53d04596","leftValue":"={{ $json.author.id }}","rightValue":"854284951273078814","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"looseTypeValidation":true,"options":{}},"type":"n8n-nodes-base.filter","typeVersion":2.2,"position":[240,-1008],"id":"51fdb395-6aad-4815-a003-6777cbd01956","name":"Get Florian's messages from last week"},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ ($('Review the dump').item.json.id || $('Review the dump').item.json.data.approved) && $json.message_type == \"file\" ? true : false }}","rightValue":true,"operator":{"type":"boolean","operation":"true","singleValue":true},"id":"134baecb-4bec-4785-9843-f30445bfa39c"}],"combinator":"and"},"renameOutput":true,"outputKey":"Approved + file"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"2001a627-ed35-4c46-84ca-2a3bf6d80ac4","leftValue":"={{ ($('Review the dump').item.json.id || $('Review the dump').item.json.data.approved) && $json.message_type == \"message\" ? true : false }}","rightValue":"","operator":{"type":"boolean","operation":"true","singleValue":true}}],"combinator":"and"},"renameOutput":true,"outputKey":"Approved + message"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"001fc300-1db6-47de-88cf-ab56ffd05d47","leftValue":"={{ $('Review the dump').item.json.data.approved }}","rightValue":false,"operator":{"type":"boolean","operation":"false","singleValue":true}}],"combinator":"and"},"renameOutput":true,"outputKey":"Not approved"}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.3,"position":[5408,-1264],"id":"5d1f8c64-d9e1-4bb6-9723-32bb558acf91","name":"Route decisions"},{"parameters":{"resource":"message","operation":"sendAndWait","guildId":{"__rl":true,"value":"854285298476646421","mode":"list","cachedResultName":"Bunkerity","cachedResultUrl":"https://discord.com/channels/854285298476646421"},"channelId":{"__rl":true,"value":"1438910656307789965","mode":"id"},"message":"=<@854284951273078814> que dois-je changer ?","responseType":"customForm","formFields":{"values":[{"fieldLabel":"Ã‰lÃ©ments Ã  changer","fieldType":"textarea","requiredField":true}]},"options":{"limitWaitTime":{"values":{"limitType":"atSpecifiedTime","maxDateAndTime":"={{ $now.startOf(\"day\").plus(14, \"hours\") }}"}},"appendAttribution":false}},"type":"n8n-nodes-base.discord","typeVersion":2,"position":[5632,-992],"id":"61e1105c-4405-4794-9b52-364b01e2e248","name":"Ask for context","webhookId":"f612d56d-9e45-494a-8559-d5b6fbd4c8c1","credentials":{"discordBotApi":{"id":"uNaipVUGxj7joc9H","name":"BunkerBot - Prod"}}},{"parameters":{"resource":"message","operation":"getAll","guildId":{"__rl":true,"value":"854285298476646421","mode":"list","cachedResultName":"Bunkerity","cachedResultUrl":"https://discord.com/channels/854285298476646421"},"channelId":{"__rl":true,"value":"1438910656307789965","mode":"list","cachedResultName":"ðŸ’¾ãƒ»flo-dump","cachedResultUrl":"https://discord.com/channels/854285298476646421/1438910656307789965"},"options":{"simplify":true}},"type":"n8n-nodes-base.discord","typeVersion":2,"position":[4064,-1248],"id":"da3ae920-aa30-4e14-b55b-488bf8039caf","name":"Get multiple messages in flo-dump","webhookId":"236ddc49-7a26-449b-b6dd-50019edc9bef","credentials":{"discordBotApi":{"id":"uNaipVUGxj7joc9H","name":"BunkerBot - Prod"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"ce53e5c3-24fa-42a0-92fb-5f52927dd4dc","leftValue":"={{ $json.author.id }}","rightValue":"1080056271115395092","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.filter","typeVersion":2.2,"position":[4288,-1248],"id":"46488b40-8574-47ce-9380-04921a705360","name":"Filter BunkerBot messages"},{"parameters":{},"type":"n8n-nodes-base.limit","typeVersion":1,"position":[4512,-1248],"id":"34a0a637-cd9c-4e72-bfd7-c8e3eb686864","name":"Limit to the last message"},{"parameters":{"resource":"message","operation":"deleteMessage","guildId":{"__rl":true,"value":"854285298476646421","mode":"list","cachedResultName":"Bunkerity","cachedResultUrl":"https://discord.com/channels/854285298476646421"},"channelId":{"__rl":true,"value":"1438910656307789965","mode":"list","cachedResultName":"ðŸ’¾ãƒ»flo-dump","cachedResultUrl":"https://discord.com/channels/854285298476646421/1438910656307789965"},"messageId":"={{ $json.id }}"},"type":"n8n-nodes-base.discord","typeVersion":2,"position":[4736,-1248],"id":"19521d86-20c0-4dd8-b443-74076c1e246a","name":"Delete review message","webhookId":"ee8335f9-1b9c-45f2-b1e0-fe5a1da0e0c2","credentials":{"discordBotApi":{"id":"uNaipVUGxj7joc9H","name":"BunkerBot - Prod"}}},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $('Ask for context').item.json.id && $('Send review file to flo-dump').item.json.id ? true : false }}","rightValue":true,"operator":{"type":"boolean","operation":"true","singleValue":true},"id":"134baecb-4bec-4785-9843-f30445bfa39c"}],"combinator":"and"},"renameOutput":true,"outputKey":"Timeout + file"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"2001a627-ed35-4c46-84ca-2a3bf6d80ac4","leftValue":"={{ $('Ask for context').item.json.id && $('Send review message to flo-dump').item.json.id ? true : false }}","rightValue":"","operator":{"type":"boolean","operation":"true","singleValue":true}}],"combinator":"and"},"renameOutput":true,"outputKey":"Timeout + message"}]},"options":{"fallbackOutput":"extra"}},"type":"n8n-nodes-base.switch","typeVersion":3.3,"position":[6752,-1008],"id":"d672211c-4c8b-4b29-83e0-777f929982c1","name":"Route timeout"},{"parameters":{"operation":"write","fileName":"/files/dump.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[2496,-1328],"id":"fcc37cc5-bd8e-49ec-95b0-6f2a42caa96b","name":"Write Dump to Disk"},{"parameters":{"fileSelector":"/files/dump.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[6976,-1328],"id":"d720382d-3d43-48b3-b6ac-9d1c88954946","name":"Read Dump from Disk"},{"parameters":{"command":"rm /files/dump.md"},"type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[7424,-1328],"id":"36a27489-dd8a-4d8b-a3ec-df0b0b65bee3","name":"Remove dump file"},{"parameters":{"resource":"message","operation":"getAll","guildId":{"__rl":true,"value":"854285298476646421","mode":"list","cachedResultName":"Bunkerity","cachedResultUrl":"https://discord.com/channels/854285298476646421"},"channelId":{"__rl":true,"value":"1438910656307789965","mode":"list","cachedResultName":"ðŸ’¾ãƒ»flo-dump","cachedResultUrl":"https://discord.com/channels/854285298476646421/1438910656307789965"},"options":{"simplify":true}},"type":"n8n-nodes-base.discord","typeVersion":2,"position":[5856,-992],"id":"ae9040ff-27e4-4481-ba99-4c01ca33d551","name":"Get multiple messages in flo-dump1","webhookId":"236ddc49-7a26-449b-b6dd-50019edc9bef","credentials":{"discordBotApi":{"id":"uNaipVUGxj7joc9H","name":"BunkerBot - Prod"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"ce53e5c3-24fa-42a0-92fb-5f52927dd4dc","leftValue":"={{ $json.author.id }}","rightValue":"1080056271115395092","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.filter","typeVersion":2.2,"position":[6080,-992],"id":"e0d93ba6-1778-43a6-89ad-1c450c0fbac6","name":"Filter BunkerBot messages1"},{"parameters":{},"type":"n8n-nodes-base.limit","typeVersion":1,"position":[6304,-992],"id":"3f7e2351-f7b6-43fa-935a-8247e6da8e00","name":"Limit to the last message1"},{"parameters":{"resource":"message","operation":"deleteMessage","guildId":{"__rl":true,"value":"854285298476646421","mode":"list","cachedResultName":"Bunkerity","cachedResultUrl":"https://discord.com/channels/854285298476646421"},"channelId":{"__rl":true,"value":"1438910656307789965","mode":"list","cachedResultName":"ðŸ’¾ãƒ»flo-dump","cachedResultUrl":"https://discord.com/channels/854285298476646421/1438910656307789965"},"messageId":"={{ $json.id }}"},"type":"n8n-nodes-base.discord","typeVersion":2,"position":[6528,-992],"id":"f65ac009-053f-49e7-b17c-e14334bedbcf","name":"Delete ask for context message","webhookId":"ee8335f9-1b9c-45f2-b1e0-fe5a1da0e0c2","credentials":{"discordBotApi":{"id":"uNaipVUGxj7joc9H","name":"BunkerBot - Prod"}}},{"parameters":{"operation":"push","list":"=review_flo_dump_{{ $now.format('yyyy-MM-dd') }}_tmp_review","messageData":"={{ $('Send review file to flo-dump').item.json.id || $('Send review message to flo-dump').item.json.id }}"},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[3616,-1248],"id":"e1d19cb5-4e4c-4b65-a03c-09a7b1d3ac12","name":"Cache tmp-review message id","credentials":{"redis":{"id":"AfgIqWjfLKZzroBz","name":"Redis db 1"}}},{"parameters":{"resource":"message","operation":"deleteMessage","guildId":{"__rl":true,"value":"854285298476646421","mode":"list","cachedResultName":"Bunkerity","cachedResultUrl":"https://discord.com/channels/854285298476646421"},"channelId":{"__rl":true,"value":"1438910656307789965","mode":"list","cachedResultName":"ðŸ’¾ãƒ»flo-dump","cachedResultUrl":"https://discord.com/channels/854285298476646421/1438910656307789965"},"messageId":"={{ $json.message_id }}"},"type":"n8n-nodes-base.discord","typeVersion":2,"position":[8320,-1232],"id":"278a59b9-49aa-4cb3-b4f9-b481725585d9","name":"Delete tmp-review message","webhookId":"ee8335f9-1b9c-45f2-b1e0-fe5a1da0e0c2","credentials":{"discordBotApi":{"id":"uNaipVUGxj7joc9H","name":"BunkerBot - Prod"}}},{"parameters":{"assignments":{"assignments":[{"id":"1879121f-13b7-46d0-b2f2-4fef38ae17dd","name":"chatInput","value":"=## ðŸ”„ Mise Ã  jour demandÃ©e par lâ€™humain\n\nUn intervenant humain demande une rÃ©vision de ta synthÃ¨se prÃ©cÃ©dente.\n\nTu dois :\n1. Relire la mÃ©moire associÃ©e Ã  cette conversation (ton historique).\n2. RÃ©Ã©valuer tout le contexte dÃ©jÃ  disponible.\n3. IntÃ©grer strictement les changements humains listÃ©s ci-dessous.\n4. Replanifier si nÃ©cessaire (sans jamais le mentionner).\n5. GÃ©nÃ©rer une nouvelle synthÃ¨se complÃ¨te selon toutes tes rÃ¨gles.\n\n### ðŸ“Œ Modifications Ã  appliquer :\n{{ $('Ask for context').item.json.data['Ã‰lÃ©ments Ã  changer'] }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[6976,-832],"id":"c5394f8a-1f9c-4962-8e96-70e4144e4a76","name":"Format fields for agent"},{"parameters":{"operation":"get","propertyName":"message_id","key":"=review_flo_dump_{{ $now.format('yyyy-MM-dd') }}_tmp_review","options":{}},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[7648,-1232],"id":"70b0cb83-b23e-48e3-b426-2e1993bf1319","name":"Get cached tmp-review message id","credentials":{"redis":{"id":"AfgIqWjfLKZzroBz","name":"Redis db 1"}}},{"parameters":{"operation":"set","key":"=review_flo_dump_{{ $now.format('yyyy-MM-dd') }}_type","value":"={{ $json.attachments.length ? \"file\" : \"message\" }}","expire":true,"ttl":86400},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[3392,-1248],"id":"2c63ab78-c8db-41d4-86f2-c60693f5750e","name":"Cache tmp-review message type","credentials":{"redis":{"id":"AfgIqWjfLKZzroBz","name":"Redis db 1"}}},{"parameters":{"operation":"get","propertyName":"message_type","key":"=review_flo_dump_{{ $now.format('yyyy-MM-dd') }}_type","options":{}},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[5184,-1248],"id":"b70896d1-4174-4bd3-a69b-4190a51c3d8d","name":"Get tmp-review message type","credentials":{"redis":{"id":"AfgIqWjfLKZzroBz","name":"Redis db 1"}}},{"parameters":{"assignments":{"assignments":[{"id":"80f58cab-8f32-4de7-9348-58a9b797531d","name":"sessionId","value":"=review_flo_dump_{{ $now.format('yyyy-MM-dd') }}","type":"string"}]},"includeOtherFields":true,"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-208,-128],"id":"0cc3961e-5a4a-469e-9cb3-7bc0fc7ee5a4","name":"Generate session ID1"},{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-432,-128],"id":"5f69e34f-fcad-450a-945f-b67a459594cf","name":"Clear today's memory"},{"parameters":{"operation":"delete","key":"={{ $json.sessionId }}"},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[16,-128],"id":"a35fec3b-a4e2-4baf-b270-727f39f0b57d","name":"Clear memory","credentials":{"redis":{"id":"AfgIqWjfLKZzroBz","name":"Redis db 1"}}},{"parameters":{"operation":"incr","key":"=review_flo_dump_{{ $now.format('yyyy-MM-dd') }}_revisions","expire":true,"ttl":86400},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[4960,-1248],"id":"82ecd275-deb8-4adf-8f00-9ff3098d479c","name":"Increment revisions","credentials":{"redis":{"id":"AfgIqWjfLKZzroBz","name":"Redis db 1"}}},{"parameters":{"operation":"get","propertyName":"revisions","key":"=review_flo_dump_{{ $now.format('yyyy-MM-dd') }}_revisions","options":{}},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[2720,-1120],"id":"a0f14003-c3d9-4d46-8c03-d796396dfb6c","name":"Get revisions number - file","credentials":{"redis":{"id":"AfgIqWjfLKZzroBz","name":"Redis db 1"}}},{"parameters":{"operation":"get","propertyName":"revisions","key":"=review_flo_dump_{{ $now.format('yyyy-MM-dd') }}_revisions","options":{}},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[2944,-944],"id":"cbe29061-3902-4ec1-b73b-c0c2acd47906","name":"Get revisions number - message","credentials":{"redis":{"id":"AfgIqWjfLKZzroBz","name":"Redis db 1"}}},{"parameters":{"operation":"set","key":"=review_flo_dump_{{ $now.format('yyyy-MM-dd') }}_revisions","value":"1","expire":true,"ttl":86400},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[-208,-1008],"id":"9e26a5db-7175-4bfe-896f-84a6be8de8fe","name":"Initialize revisions","credentials":{"redis":{"id":"AfgIqWjfLKZzroBz","name":"Redis db 1"}}},{"parameters":{"mode":"combine","combineBy":"combineByPosition","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[2944,-1328],"id":"e79340c6-6f19-4f2d-8214-58fef3d142cf","name":"Merge revision / data"},{"parameters":{"fieldToSplitOut":"message_id","options":{}},"type":"n8n-nodes-base.splitOut","typeVersion":1,"position":[7872,-1232],"id":"c43feda3-ebfe-41a1-99b0-493c1fe93dac","name":"Split message ids"},{"parameters":{"options":{}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[8096,-1232],"id":"e848e168-6367-461c-8f2b-2c582805c78c","name":"Loop Over Items"},{"parameters":{"assignments":{"assignments":[{"id":"a833bac7-5a5c-4181-afef-3b63178baa55","name":"content","value":"=## ðŸ§  RÃ´le\n\nTu es **BunkerSummary**, agent spÃ©cialisÃ© dans la synthÃ¨se de **messages liÃ©s Ã  des tÃ¢ches** pour **Bunkerity** (Ã©diteur du WAF open source **BunkerWeb**).\n\nTu as accÃ¨s Ã  :\n\n* **La documentation officielle BunkerWeb** (seule source autorisÃ©e).\n* Un **outil de rÃ©flexion/planification (*think*)**, que tu dois\n  **obligatoirement utiliser AVANT toute rÃ©daction ou rÃ©ponse**,\n  y compris lorsque de nouveaux messages sont rÃ©cupÃ©rÃ©s.\n* Un **outil dâ€™extraction Discord** permettant :\n\n  * de rÃ©cupÃ©rer **un message unique**,\n  * de rÃ©cupÃ©rer **un ensemble de messages** dans un salon,\n  * de traiter un **message rÃ©fÃ©rencÃ© via un lien Discord**,\n  * de rÃ©cupÃ©rer les **messages dâ€™un thread**.\n\n### ðŸ”¥ RÃ¨gle critique (threads & mentions)\n\nSi un message mentionnÃ© (via lien Discord) fait rÃ©fÃ©rence Ã  un thread ou demande dâ€™Â« aller lire le fil Â» :\n\n1. **RÃ©cupÃ¨re le message mentionnÃ©**.\n2. **DÃ©duis automatiquement** sâ€™il appartient Ã  un thread.\n3. **RÃ©cupÃ¨re lâ€™intÃ©gralitÃ© du thread**.\n4. Si lâ€™information est insuffisante â†’\n   **rÃ©cupÃ¨re aussi les messages du canal parent** pour reconstruire la conversation.\n5. Si cela change le contexte â†’\n   **tu relances immÃ©diatement une nouvelle Ã©tape *think*** (sans jamais le dire).\n\n**Aucune invention** : si un point concerne BunkerWeb et nâ€™est pas confirmÃ© â†’ tu consultes la documentation.\n\n---\n\n## ðŸŽ¯ Mission\n\nPour chaque lot de messages Discord :\n\n1. **Analyser profondÃ©ment** le contexte, les intentions, la logique mÃ©tier et lâ€™impact sur les tÃ¢ches.\n2. **Toujours utiliser lâ€™outil *think*** afin de planifier ta rÃ©flexion avant dâ€™Ã©crire.\n3. **Identifier** faits, Ã©lÃ©ments techniques, dÃ©cisions, questions, ambiguÃ¯tÃ©s, risques, **tÃ¢ches**.\n4. Produire un rÃ©sumÃ© **clair, concis, exploitable**, orientÃ© **gestion de tÃ¢ches**.\n5. Rester strictement dans le pÃ©rimÃ¨tre Bunkerity/BunkerWeb.\n\n---\n\n## ðŸ§© Format de sortie\n\n1. **Contexte** (2â€“3 phrases max).\n2. **Faits / Points importants** (3â€“8 bullets).\n3. **Actions Ã  mener (PRIORITÃ‰)**\n\n   * TÃ¢ches prÃ©cises et actionnables.\n   * Si aucune â†’ **Â« Aucune action explicite. Â»**\n4. **Risques / Blocages** (seulement ceux mentionnÃ©s).\n5. **SynthÃ¨se en 1 phrase**.\n\n---\n\n## ðŸ§  Contraintes\n\n* **Utilisation obligatoire de lâ€™outil *think* avant toute rÃ©ponse**, et Ã  nouveau si le contexte Ã©volue.\n* Ne jamais mentionner lâ€™usage de lâ€™outil.\n* Ton : professionnel, technique, direct.\n* Signaler toute incertitude : **Â« AmbiguÃ¯tÃ© dÃ©tectÃ©e : â€¦ Â»**\n* Pour un point validÃ© : **Â« Selon la documentation BunkerWebâ€¦ Â»**\n* PrioritÃ© stricte : **Actions > Risques > Points clÃ©s > Contexte**.","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-432,-352],"id":"c37d39a7-c64c-4466-82f3-fbbfb24a65d2","name":"Original prompt - v2"}],"connections":{"Get messages":{"main":[[{"node":"Get Florian's messages from last week","type":"main","index":0}]]},"Sort by date":{"main":[[{"node":"Format messages","type":"main","index":0}]]},"BunkerWeb documentation":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"text-embedding-3-small":{"ai_embedding":[[{"node":"BunkerWeb documentation","type":"ai_embedding","index":0}]]},"AI Agent":{"main":[[{"node":"If message is over 1900 chars","type":"main","index":0}]]},"Think":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Tavily":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Format messages":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Convert to File":{"main":[[{"node":"Write Dump to Disk","type":"main","index":0}]]},"Every friday at 2pm":{"main":[[{"node":"Initialize revisions","type":"main","index":0}]]},"model-router":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Get multiple messages":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Get one message":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"If message is over 1900 chars":{"main":[[{"node":"Convert to File","type":"main","index":0}],[{"node":"Get revisions number - message","type":"main","index":0}]]},"Review memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"Get Florian's messages from last week":{"main":[[{"node":"Sort by date","type":"main","index":0}]]},"Send review file to flo-dump":{"main":[[{"node":"Cache tmp-review message type","type":"main","index":0}]]},"Send review message to flo-dump":{"main":[[{"node":"Cache tmp-review message type","type":"main","index":0}]]},"Review the dump":{"main":[[{"node":"Get multiple messages in flo-dump","type":"main","index":0}]]},"Route decisions":{"main":[[{"node":"Read Dump from Disk","type":"main","index":0}],[{"node":"Send message to tech","type":"main","index":0}],[{"node":"Ask for context","type":"main","index":0}]]},"Get multiple messages in flo-dump":{"main":[[{"node":"Filter BunkerBot messages","type":"main","index":0}]]},"Filter BunkerBot messages":{"main":[[{"node":"Limit to the last message","type":"main","index":0}]]},"Limit to the last message":{"main":[[{"node":"Delete review message","type":"main","index":0}]]},"Delete review message":{"main":[[{"node":"Increment revisions","type":"main","index":0}]]},"Ask for context":{"main":[[{"node":"Get multiple messages in flo-dump1","type":"main","index":0}]]},"Route timeout":{"main":[[{"node":"Read Dump from Disk","type":"main","index":0}],[{"node":"Send message to tech","type":"main","index":0}],[{"node":"Format fields for agent","type":"main","index":0}]]},"Write Dump to Disk":{"main":[[{"node":"Get revisions number - file","type":"main","index":0},{"node":"Merge revision / data","type":"main","index":0}]]},"Read Dump from Disk":{"main":[[{"node":"Send file to tech","type":"main","index":0}]]},"Remove dump file":{"main":[[{"node":"Get cached tmp-review message id","type":"main","index":0}]]},"Send file to tech":{"main":[[{"node":"Remove dump file","type":"main","index":0}]]},"Get multiple messages in flo-dump1":{"main":[[{"node":"Filter BunkerBot messages1","type":"main","index":0}]]},"Filter BunkerBot messages1":{"main":[[{"node":"Limit to the last message1","type":"main","index":0}]]},"Limit to the last message1":{"main":[[{"node":"Delete ask for context message","type":"main","index":0}]]},"Delete ask for context message":{"main":[[{"node":"Route timeout","type":"main","index":0}]]},"Cache tmp-review message id":{"main":[[{"node":"Review the dump","type":"main","index":0}]]},"Delete tmp-review message":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Format fields for agent":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Get cached tmp-review message id":{"main":[[{"node":"Split message ids","type":"main","index":0}]]},"Send message to tech":{"main":[[{"node":"Get cached tmp-review message id","type":"main","index":0}]]},"Cache tmp-review message type":{"main":[[{"node":"Cache tmp-review message id","type":"main","index":0}]]},"Get tmp-review message type":{"main":[[{"node":"Route decisions","type":"main","index":0}]]},"Clear today's memory":{"main":[[{"node":"Generate session ID1","type":"main","index":0}]]},"Generate session ID1":{"main":[[{"node":"Clear memory","type":"main","index":0}]]},"Increment revisions":{"main":[[{"node":"Get tmp-review message type","type":"main","index":0}]]},"Get revisions number - file":{"main":[[{"node":"Merge revision / data","type":"main","index":1}]]},"Get revisions number - message":{"main":[[{"node":"Send review message to flo-dump","type":"main","index":0}]]},"Initialize revisions":{"main":[[{"node":"Get messages","type":"main","index":0}]]},"Merge revision / data":{"main":[[{"node":"Send review file to flo-dump","type":"main","index":0}]]},"Split message ids":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Loop Over Items":{"main":[[],[{"node":"Delete tmp-review message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Every day at 8am":{"recurrenceRules":[]},"node:Every friday at 2pm":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"e1b0b822-1f5a-49f5-8f84-02750ab6bc64","triggerCount":1,"shared":[{"updatedAt":"2025-09-15T15:10:15.425Z","createdAt":"2025-09-15T15:10:15.425Z","role":"workflow:owner","workflowId":"dMLtg4q0Ra6XW7qq","projectId":"ZjBkzD6jhnG4YX2d"}],"tags":[{"updatedAt":"2025-08-26T13:05:46.387Z","createdAt":"2025-08-26T13:05:46.387Z","id":"KDJm2H5ESMPxJovN","name":"Bunkerity"}]}