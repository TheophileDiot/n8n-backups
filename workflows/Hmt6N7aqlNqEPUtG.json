{"createdAt":"2025-08-12T06:52:52.356Z","updatedAt":"2025-08-12T07:53:57.000Z","id":"Hmt6N7aqlNqEPUtG","name":"Monitor Keyword Rankings","active":false,"isArchived":true,"nodes":[{"parameters":{},"id":"e0052e8c-d3fb-4a5e-87e3-7ca34e223f00","name":"MCP Client","type":"n8n-nodes-mcp.mcpClientTool","position":[2144,1520],"typeVersion":1,"credentials":{}},{"parameters":{"rule":{"interval":[{"triggerAtHour":9}]}},"id":"110d1230-5ce7-42af-b588-227fb0837300","name":"🕒 Trigger: Run Daily/Weekly","type":"n8n-nodes-base.scheduleTrigger","position":[1504,1248],"typeVersion":1.2},{"parameters":{"assignments":{"assignments":[{"id":"95b1399f-4709-46e0-89a9-cbf17ce9c06c","name":"keyword","type":"string","value":"waf"},{"id":"26c28c22-6d07-4464-8d4c-0a2982651df1","name":"domain","value":"www.bunkerweb.io","type":"string"}]},"options":{}},"id":"e2f8f44d-3d25-450c-9a0c-8744c81c8acf","name":"📝 Input: Keyword & Domain","type":"n8n-nodes-base.set","position":[1712,1248],"typeVersion":3.4},{"parameters":{"promptType":"define","text":"=Based on the following keyword, provide me ranking of the 1st 5 website.\nkeyword: {{ $json.keyword }}","hasOutputParser":true,"options":{}},"id":"70096c0a-4100-4b62-93cc-44aa6911ca70","name":"🤖 SERP Scraper Agent (MCP)","type":"@n8n/n8n-nodes-langchain.agent","position":[1984,1248],"typeVersion":2},{"parameters":{"jsCode":"// Get the SERP list from the incoming item\nconst serpList = items[0].json.output;\n\n// Emit each result as a separate item\nreturn serpList.map(result => {\n  return {\n    json: result\n  };\n});\n"},"id":"b1e64938-eca3-4869-b707-268cd534753d","name":"🧠 Format SERP Results","type":"n8n-nodes-base.code","position":[2464,1248],"typeVersion":2},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"mode":"list","value":"1p64unH_JjzG978cAxPZC4kSZmoXgvYTA-Q7qdfnxr8Y","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1p64unH_JjzG978cAxPZC4kSZmoXgvYTA-Q7qdfnxr8Y/edit?usp=drivesdk","cachedResultName":"Website Ranking"},"sheetName":{"__rl":true,"mode":"list","value":"gid=0","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1p64unH_JjzG978cAxPZC4kSZmoXgvYTA-Q7qdfnxr8Y/edit#gid=0","cachedResultName":"Sheet1"},"columns":{"value":{"URL":"={{ $json.url }}","Rank":"={{ $json.rank }}","Title":"={{ $json.title }}","Description":"={{ $json.description }}"},"schema":[{"id":"Title","type":"string","display":true,"required":false,"displayName":"Title","defaultMatch":false,"canBeUsedToMatch":true},{"id":"URL","type":"string","display":true,"required":false,"displayName":"URL","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Description","type":"string","display":true,"required":false,"displayName":"Description","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Rank","type":"string","display":true,"required":false,"displayName":"Rank","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":[],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"id":"dd74a45c-698c-4ef3-a123-e4de6fab2ae3","name":"📊 Log to Google Sheets","type":"n8n-nodes-base.googleSheets","position":[2688,1248],"typeVersion":4.6,"disabled":true},{"parameters":{"content":"## 🟦 **Section 1: Input & Trigger Configuration**\n\n### 🕒 **Trigger: Run Daily/Weekly**\n\n🔧 **Node Name:** `Trigger: Run Daily/Weekly`\n💡 **What it does:**\nThis node automatically starts your workflow on a set schedule. You can run it:\n\n* Daily to monitor SEO fluctuations\n* Weekly to track long-term trends\n\n📌 **Why it's useful:**\nNo manual work is needed. Just set it once and it keeps your ranking logs up to date.\n\n---\n\n### 📝 **Input: Keyword & Domain**\n\n🔧 **Node Name:** `Input: Keyword & Domain`\n💡 **What it does:**\nHere you provide the **search keyword** (like `\"best running shoes\"`) and optionally the **domain name** (like `\"yourwebsite.com\"`) to monitor.\n\n📌 **Why it's useful:**\nYou can change or extend keywords anytime without changing the rest of the workflow. Great for campaign flexibility.\n\n---\n\n","height":1320,"width":360,"color":6},"id":"65ae0a63-3455-4cab-a330-59e52d2afd70","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","position":[1488,128],"typeVersion":1},{"parameters":{"content":"## 🟨 **Section 2: Smart SERP Scraping with AI Agent**\n\n### 🤖 **SERP Scraper Agent (MCP)**\n\n🔧 **Node Name:** `SERP Scraper Agent (MCP)`\n💡 **What it does:**\nThis is your smart agent that uses **Bright Data's MCP (Mobile Carrier Proxy)** to simulate real user behavior and scrape **Google Search Results** accurately.\n\nIt connects to:\n\n#### 🧠 **AI Brain**\n\n🔧 **Sub-node:** `OpenAI Chat Model`\n🎯 Understands the keyword, crafts a natural query prompt, and makes sure the search context is accurate.\n\n#### 🌐 **MCP SERP Fetcher**\n\n🔧 **Sub-node:** `MCP Client`\n🛰️ Actually performs the search on Google and fetches the **top 5 results** anonymously through real mobile-like connections (bypassing CAPTCHAs & blocks).\n\n#### 🧾 **SERP Output Formatter**\n\n🔧 **Sub-node:** `Structured Output Parser`\n🧹 Cleans up the scraped data and structures it into useful fields:\n\n* `rank`\n* `title`\n* `url`\n* `description`\n\n📌 **Why it's useful:**\nTraditional scrapers break often. This smart setup ensures highly accurate, undetectable scraping that adapts to changes in search results.\n\n---\n\n","height":1280,"width":340,"color":3},"id":"ae9d117c-f222-474b-b7d0-21d6d79af055","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","position":[1952,176],"typeVersion":1},{"parameters":{"content":"## 🟩 **Section 3: Rank Logging and Reporting**\n\n### 🧠 **Parse SERP Results**\n\n🔧 **Node Name:** `Parse SERP Results`\n💡 **What it does:**\nThis **Code node** takes the structured list of top 5 results and **splits them into individual records**, one per website.\n\n📌 **Why it's useful:**\nIt prepares the data so each row can be logged separately in your spreadsheet, which makes filtering, charting, and comparison super easy.\n\n---\n\n### 📊 **Log to Google Sheets**\n\n🔧 **Node Name:** `Log to Google Sheets`\n💡 **What it does:**\nAppends each parsed search result (rank, title, URL, description) into your tracking spreadsheet.\n\n","height":1100,"width":400,"color":5},"id":"9f627de0-d856-4108-a681-9e8d35013349","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","position":[2432,352],"typeVersion":1},{"parameters":{"content":"## I’ll receive a tiny commission if you join Bright Data through this link—thanks for fueling more free content!\n\n### https://get.brightdata.com/1tndi4600b25","height":240,"width":380,"color":7},"id":"9a2fcd6a-f061-40dc-9f5d-fedc00acb230","name":"Sticky Note5","type":"n8n-nodes-base.stickyNote","position":[2928,352],"typeVersion":1},{"parameters":{"content":"=======================================\n            WORKFLOW ASSISTANCE\n=======================================\nFor any questions or support, please contact:\n    Yaron@nofluff.online\n\nExplore more tips and tutorials here:\n   - YouTube: https://www.youtube.com/@YaronBeen/videos\n   - LinkedIn: https://www.linkedin.com/in/yaronbeen/\n=======================================\n","height":320,"width":1300,"color":4},"id":"f1205b22-a85b-456d-af7c-7c4e37dd62bc","name":"Sticky Note9","type":"n8n-nodes-base.stickyNote","position":[-176,128],"typeVersion":1},{"parameters":{"content":"## 🔍 **Workflow: Monitor Keyword Rankings with AI & Bright Data MCP**\n\nTrack where your website ranks on Google for specific keywords, using AI-powered scraping and structured logging in Google Sheets.\n\n---\n\n## 🟦 **Section 1: Input & Trigger Configuration**\n\n### 🕒 **Trigger: Run Daily/Weekly**\n\n🔧 **Node Name:** `Trigger: Run Daily/Weekly`\n💡 **What it does:**\nThis node automatically starts your workflow on a set schedule. You can run it:\n\n* Daily to monitor SEO fluctuations\n* Weekly to track long-term trends\n\n📌 **Why it's useful:**\nNo manual work is needed. Just set it once and it keeps your ranking logs up to date.\n\n---\n\n### 📝 **Input: Keyword & Domain**\n\n🔧 **Node Name:** `Input: Keyword & Domain`\n💡 **What it does:**\nHere you provide the **search keyword** (like `\"best running shoes\"`) and optionally the **domain name** (like `\"yourwebsite.com\"`) to monitor.\n\n📌 **Why it's useful:**\nYou can change or extend keywords anytime without changing the rest of the workflow. Great for campaign flexibility.\n\n---\n\n## 🟨 **Section 2: Smart SERP Scraping with AI Agent**\n\n### 🤖 **SERP Scraper Agent (MCP)**\n\n🔧 **Node Name:** `SERP Scraper Agent (MCP)`\n💡 **What it does:**\nThis is your smart agent that uses **Bright Data's MCP (Mobile Carrier Proxy)** to simulate real user behavior and scrape **Google Search Results** accurately.\n\nIt connects to:\n\n#### 🧠 **AI Brain**\n\n🔧 **Sub-node:** `OpenAI Chat Model`\n🎯 Understands the keyword, crafts a natural query prompt, and makes sure the search context is accurate.\n\n#### 🌐 **MCP SERP Fetcher**\n\n🔧 **Sub-node:** `MCP Client`\n🛰️ Actually performs the search on Google and fetches the **top 5 results** anonymously through real mobile-like connections (bypassing CAPTCHAs & blocks).\n\n#### 🧾 **SERP Output Formatter**\n\n🔧 **Sub-node:** `Structured Output Parser`\n🧹 Cleans up the scraped data and structures it into useful fields:\n\n* `rank`\n* `title`\n* `url`\n* `description`\n\n📌 **Why it's useful:**\nTraditional scrapers break often. This smart setup ensures highly accurate, undetectable scraping that adapts to changes in search results.\n\n---\n\n## 🟩 **Section 3: Rank Logging and Reporting**\n\n### 🧠 **Parse SERP Results**\n\n🔧 **Node Name:** `Parse SERP Results`\n💡 **What it does:**\nThis **Code node** takes the structured list of top 5 results and **splits them into individual records**, one per website.\n\n📌 **Why it's useful:**\nIt prepares the data so each row can be logged separately in your spreadsheet, which makes filtering, charting, and comparison super easy.\n\n---\n\n### 📊 **Log to Google Sheets**\n\n🔧 **Node Name:** `Log to Google Sheets`\n💡 **What it does:**\nAppends each parsed search result (rank, title, URL, description) into your tracking spreadsheet.\n\n📌 **Why it's useful:**\nYou now have a full historical record of how rankings change day by day, week by week. This is great for:\n\n* SEO audits\n* Campaign reporting\n* Alerting when a competitor outranks you\n\n---\n\n","height":2558,"width":1289,"color":4},"id":"c29f9e9c-0198-4576-a54c-f0854cc5454e","name":"Sticky Note4","type":"n8n-nodes-base.stickyNote","position":[-176,480],"typeVersion":1},{"parameters":{"options":{}},"id":"31dddab7-6367-4a4f-b866-2821f9d785cc","name":"Auto-fixing Output Parser","type":"@n8n/n8n-nodes-langchain.outputParserAutofixing","position":[2272,1520],"typeVersion":1},{"parameters":{"jsonSchemaExample":"[\n  {\n    \"rank\": 1,\n    \"title\": \"Runner's World\",\n    \"url\": \"https://www.runnersworld.com/gear/a19663621/best-running-shoes/\",\n    \"description\": \"A comprehensive guide on the best running shoes, recommending models like Brooks Ghost and Nike Pegasus for new runners.\"\n  },\n  {\n    \"rank\": 2,\n    \"title\": \"RunRepeat\",\n    \"url\": \"https://runrepeat.com/catalog/running-shoes\",\n    \"description\": \"Offers running shoe reviews with ratings for various models such as Nike Pegasus 41 and Hoka Mach 6.\"\n  },\n  {\n    \"rank\": 3,\n    \"title\": \"Believe in the Run\",\n    \"url\": \"https://believeintherun.com/shoe-reviews/best-running-shoes-2025/\",\n    \"description\": \"Features an in-depth guide to the best running shoes of 2025 across different categories.\"\n  },\n  {\n    \"rank\": 4,\n    \"title\": \"The Run Testers\",\n    \"url\": \"https://theruntesters.com/running-shoes/the-best-running-shoes-to-buy/\",\n    \"description\": \"Reviews the best running shoes available, highlighting their performance and value.\"\n  },\n  {\n    \"rank\": 5,\n    \"title\": \"Men's Health\",\n    \"url\": \"https://www.menshealth.com/fitness/a64476227/running-shoes-editors-picks/\",\n    \"description\": \"Provides a selection of top running shoes recommended by Men's Health editors.\"\n  }\n]\n"},"id":"9ea12b6d-aa3a-49cf-9e77-b066ea4e9874","name":"Structured Output Parser1","type":"@n8n/n8n-nodes-langchain.outputParserStructured","position":[2416,1728],"typeVersion":1.2},{"parameters":{"modelName":"models/gemma-3n-e4b-it","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[1984,1536],"id":"87db08ac-f568-4583-b995-5a602815a5d8","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"GNtLDT3w0YRmjHrT","name":"Google Gemini(PaLM) Api account"}}},{"parameters":{"modelName":"models/gemma-3n-e4b-it","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[2272,1728],"id":"1b756d6d-a30e-46c9-baac-247257679bfd","name":"Google Gemini Chat Model1","credentials":{"googlePalmApi":{"id":"GNtLDT3w0YRmjHrT","name":"Google Gemini(PaLM) Api account"}}}],"connections":{"🧠 Format SERP Results":{"main":[[{"node":"📊 Log to Google Sheets","type":"main","index":0}]]},"Auto-fixing Output Parser":{"ai_outputParser":[[{"node":"🤖 SERP Scraper Agent (MCP)","type":"ai_outputParser","index":0}]]},"Structured Output Parser1":{"ai_outputParser":[[{"node":"Auto-fixing Output Parser","type":"ai_outputParser","index":0}]]},"📝 Input: Keyword & Domain":{"main":[[{"node":"🤖 SERP Scraper Agent (MCP)","type":"main","index":0}]]},"🤖 SERP Scraper Agent (MCP)":{"main":[[{"node":"🧠 Format SERP Results","type":"main","index":0}]]},"🕒 Trigger: Run Daily/Weekly":{"main":[[{"node":"📝 Input: Keyword & Domain","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"🤖 SERP Scraper Agent (MCP)","type":"ai_languageModel","index":0}]]},"Google Gemini Chat Model1":{"ai_languageModel":[[{"node":"Auto-fixing Output Parser","type":"ai_languageModel","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"f7b748ac-f08e-49f0-aca8-1b72d78f91c0","triggerCount":0,"shared":[{"createdAt":"2025-09-15T15:10:15.425Z","updatedAt":"2025-09-15T15:10:15.425Z","role":"workflow:owner","workflowId":"Hmt6N7aqlNqEPUtG","projectId":"ZjBkzD6jhnG4YX2d"}],"tags":[]}