{"createdAt":"2025-08-18T09:42:54.983Z","updatedAt":"2025-09-11T07:11:31.000Z","id":"Oe7mTErr70oC016z","name":"Daily summary of new BunkerWeb issues","active":true,"isArchived":false,"nodes":[{"parameters":{"rule":{"interval":[{"triggerAtHour":9}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[720,112],"id":"d6eab5bc-8d00-4e58-968f-77ebf2d21426","name":"Every day at 9am"},{"parameters":{"url":"=https://api.github.com/search/issues?q=repo:bunkerity/bunkerweb+type:issue+created:>={{ $now.minus(1, 'week').format('yyyy-MM-dd') }}\n","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[944,304],"id":"44ac4cf9-6fe1-4267-a81f-43b762f84076","name":"Fetch last week's issues"},{"parameters":{"url":"=https://api.github.com/search/issues?q=repo:bunkerity/bunkerweb+type:issue+created:{{ $now.minus(1, 'day').format('yyyy-MM-dd') }}\n","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[944,112],"id":"1c348fe4-a172-488b-85df-b251c61ce4cb","name":"Fetch yesterday's issues"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"2dc05174-4acc-413a-b567-de1bf5ec5f6a","leftValue":"={{ $json.created_at.toDateTime().format('yyyy-MM-dd') }}","rightValue":"={{ $now.minus('1', 'day').format('yyyy-MM-dd') }}","operator":{"type":"dateTime","operation":"equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.filter","typeVersion":2.2,"position":[1392,232],"id":"5d470040-be0b-4b01-ad41-1d2a392cd8b0","name":"Was created yesterday"},{"parameters":{"jsCode":"// Get the input data\nconst data = items[0].json;\n\n// Make sure \"items\" exists\nif (!data.items || !Array.isArray(data.items)) {\n  return [];\n}\n\n// Map each issue into a new n8n item\nreturn data.items.map(issue => {\n  return {\n    json: {\n      id: issue.id,\n      number: issue.number,\n      title: issue.title,\n      url: issue.html_url,\n      state: issue.state,\n      created_at: issue.created_at,\n      updated_at: issue.updated_at,\n      author: issue.user?.login || null,\n      labels: issue.labels?.map(l => l.name) || [],\n      body: issue.body || null,\n    }\n  };\n});\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1168,232],"id":"5cddf70c-6d53-4504-877b-f5521cfa1d4d","name":"Parse issues"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"loose","version":2},"conditions":[{"id":"7cad6d4b-88fa-41fd-8b1c-49251513eb17","leftValue":"={{ $json.in_cache }}","rightValue":"=1","operator":{"type":"string","operation":"notEquals"}}],"combinator":"and"},"looseTypeValidation":true,"options":{}},"type":"n8n-nodes-base.filter","typeVersion":2.2,"position":[2064,232],"id":"f7085b4e-1952-4751-aa46-ffd08ac265c2","name":"Hasn't been processed already"},{"parameters":{"operation":"get","propertyName":"in_cache","key":"=github_bunkerweb_issue_{{ $json.id }}","options":{}},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[1616,304],"id":"0f1c6f11-3cc6-422a-9093-2a8fa18f968c","name":"Get cached ID","credentials":{"redis":{"id":"AfgIqWjfLKZzroBz","name":"Redis db 1"}}},{"parameters":{"mode":"combine","combineBy":"combineByPosition","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[1840,232],"id":"90568174-ffe7-45d5-ade5-94931d7a501c","name":"Merge cached response and entity"},{"parameters":{"content":"## ðŸ’¾ Filter already processed issues.","height":288,"width":640,"color":3},"type":"n8n-nodes-base.stickyNote","position":[1568,176],"typeVersion":1,"id":"b1595f4b-e18b-465e-9796-c2f6eb9fb80b","name":"Sticky Note3"},{"parameters":{"promptType":"define","text":"=# Daily GitHub Issues Summarizer (â‰¤2000 chars)\n\n**Goal:** Summarize GitHub issues from JSON into a short daily report.\n\n**Limits:**\n\n* Output **<2000 chars**.\n* Each issue = **1 short line summary**.\n* **Tavily only if strictly needed**, never for *BunkerWeb*.\n\n**Date:**\n\n* â€œYesterdayâ€ = `<TODAY_UTC - 1 day>` in UTC.\n\n**Parsing:**\n\n* Input = flat array of issue objects with:\n  `number, title, author, labels, created_at, updated_at`.\n\n**Steps:**\n\n1. Select issues with `created_at` or `updated_at` on yesterday.\n2. Group by theme (auth, config, deps, etc.).\n3. For each:\n\n   * `#<num> [<label>] <title> â€” <author>`\n   * `Summary: <short line>`\n\n**Format:**\n\n```\n### Issues from <YYYY-MM-DD> (UTC)\n\n<Group>\n- [#<num>] [<label>] <title> â€” <author>\n  Summary: <short line>\n```\n\n---\n\n## DATASET_JSON\n\n```json\n{{ $json.toJsonString() }}\n```","options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[4136,64],"id":"de383fd2-21a3-4ec2-803c-f56a343fdb52","name":"Agent summarizer","retryOnFail":false,"waitBetweenTries":5000,"maxTries":2},{"parameters":{"jsCode":"return [\n  {\n    json: {\n      issues: $input.all()\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[2736,112],"id":"3c127b4d-6f8c-405c-96ba-34455b43a334","name":"Merge issues data"},{"parameters":{"query":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Query', ``, 'string') }}","options":{}},"type":"@tavily/n8n-nodes-tavily.tavilyTool","typeVersion":1,"position":[4336,288],"id":"ac432773-ddcb-4195-a9a7-e8665f6b37fc","name":"Tavily search","credentials":{"tavilyApi":{"id":"CpAx4VhG0PmKrOZR","name":"Tavily account - GitHub"}}},{"parameters":{"sortFieldsUi":{"sortField":[{"fieldName":"created_at"}]},"options":{}},"type":"n8n-nodes-base.sort","typeVersion":1,"position":[2512,232],"id":"68150206-e014-45ce-b820-7ad81139769b","name":"Sort by creation date"},{"parameters":{"authentication":"webhook","options":{"wait":true},"embeds":{"values":[{"description":"={{ $json.summary }}","author":"=BunkerBot","color":"#24292e","timestamp":"=","title":"ðŸ™ðŸ˜º Yesterday GitHub issues summary","url":"=https://github.com/bunkerity/bunkerweb/issues?q=sort%3Aupdated-desc%20is%3Aissue%20is%3Aopen%20created%3A{{ $now.minus(1, 'day').format('yyyy-MM-dd') }}"}]}},"type":"n8n-nodes-base.discord","typeVersion":2,"position":[4768,64],"id":"df44493d-469b-4cd9-8a75-7a812185b5b8","name":"Alert discord","webhookId":"24990fec-b92a-4de4-9348-933779f8ebfe","retryOnFail":true,"waitBetweenTries":5000,"credentials":{"discordWebhookApi":{"id":"IdC7voNSP2Pynhvq","name":"Discord Webhook dev"}}},{"parameters":{"assignments":{"assignments":[{"id":"ce9eeeb0-b925-4f87-baf4-94e28b5b9610","name":"created_at","value":"={{ DateTime.fromISO($json.created_at) }}","type":"string"}]},"includeOtherFields":true,"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[2288,232],"id":"6e6893fc-6210-4957-9c49-492354f51d86","name":"Parse creation date"},{"parameters":{"amount":65},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[3632,-128],"id":"dbd16a21-f914-4da9-9fb9-cf4ff86edaab","name":"Wait for the gemini API rate limit to end","webhookId":"19ce6afd-5f60-4e89-a7db-2fe2abd51c5a"},{"parameters":{"content":"### ðŸ“ Create a summary from the issues using devstral small 2505.","height":496,"width":640,"color":5},"type":"n8n-nodes-base.stickyNote","position":[4040,-64],"typeVersion":1,"id":"c2eb0d3f-eca4-428c-9ecb-f0748fe94137","name":"Sticky Note"},{"parameters":{"keys":{"key":[{"currentKey":"output","newKey":"summary"}]},"additionalOptions":{}},"type":"n8n-nodes-base.renameKeys","typeVersion":1,"position":[4544,64],"id":"de2efb9c-2105-4fbb-804c-cbc418536cbd","name":"Rename output -> summary"},{"parameters":{"operation":"set","key":"=github_bunkerweb_issue_{{ $json.id }}","value":"1","expire":true,"ttl":"={{ DateTime.fromSeconds(0).plus(1, \"day\").minus(1, 'hour').toSeconds() }}"},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[2736,304],"id":"e7f62d72-205c-414a-9ce9-f9a4d4b4c799","name":"Save processed ID","credentials":{"redis":{"id":"AfgIqWjfLKZzroBz","name":"Redis db 1"}}},{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[720,528],"id":"5cc79a8a-451f-40dc-8b5c-7c85e7a058e1","name":"Clear processed IDs"},{"parameters":{"jsCode":"return Object.keys($input.first().json).map(k => {\n  return { json: { key: k } };\n});"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1168,528],"id":"68eeee15-b3d3-42cb-bac0-b02fc6dfad92","name":"Extract keys"},{"parameters":{"operation":"delete","key":"={{ $json.key }}"},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[1392,528],"id":"3522a3f0-793e-4ed0-a70d-d09fe1337d68","name":"Delete extracted keys","credentials":{"redis":{"id":"AfgIqWjfLKZzroBz","name":"Redis db 1"}}},{"parameters":{"operation":"keys","keyPattern":"github_bunkerweb_issue_*"},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[944,528],"id":"7a3bdd5c-8f4f-4a2d-8f0a-17d4aa1b05f2","name":"Get all github_bunkerweb_issue* keys","credentials":{"redis":{"id":"AfgIqWjfLKZzroBz","name":"Redis db 1"}}},{"parameters":{"sessionIdType":"customKey","sessionKey":"github_issues_bunkerweb"},"type":"@n8n/n8n-nodes-langchain.memoryRedisChat","typeVersion":1.5,"position":[4208,288],"id":"51c80ec8-f02c-45c6-941c-1c5d14d5133b","name":"Redis","credentials":{"redis":{"id":"AfgIqWjfLKZzroBz","name":"Redis db 1"}}},{"parameters":{"jsCode":"// Input: full dataset from GitHub API (wrapped in n8n format)\n// Output: simplified dataset with only required fields\n\nreturn [\n  {\n    json: {\n      issues: $json.issues.map(issue => {\n        const data = issue.json;\n        return {\n          json: {\n            number: data.number,\n            title: data.title,\n            body: data.body,\n            author: data.author,\n            labels: data.labels,\n            created_at: data.created_at,\n            updated_at: data.updated_at,\n          }\n        };\n      })\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[3856,64],"id":"74b0fc8c-181e-449a-8bb7-6ab72ee29986","name":"Simplify issues details"},{"parameters":{"operation":"get","propertyName":"gemini_flash_executions","key":"gemini_flash_executions","options":{}},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[2960,112],"id":"acfc2ab3-1f75-41e7-a577-9b53db62a2c1","name":"Get gemini flash executions","credentials":{"redis":{"id":"AfgIqWjfLKZzroBz","name":"Redis db 1"}}},{"parameters":{"mode":"combine","combineBy":"combineByPosition","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[3184,112],"id":"5333ab4d-091a-4e93-b209-b4840519f504","name":"Add gemini_flash_executions key"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"loose","version":2},"conditions":[{"id":"8152c702-f81c-471b-a7bc-33c4fedc9593","leftValue":"={{ $json.gemini_flash_executions }}","rightValue":10,"operator":{"type":"number","operation":"gte"}}],"combinator":"and"},"looseTypeValidation":true,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[3408,112],"id":"6ef411f5-aa7d-4699-b5f1-9e9c29dd605b","name":"If there's been 10 executions or more"},{"parameters":{"operation":"delete","key":"gemini_flash_executions"},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[3856,-128],"id":"29b6e51d-63a8-4722-a18b-a1cbfde80414","name":"Delete gemini_flash_executions","credentials":{"redis":{"id":"AfgIqWjfLKZzroBz","name":"Redis db 1"}}},{"parameters":{"operation":"incr","key":"gemini_flash_executions","expire":true,"ttl":65},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[3632,280],"id":"efe62043-fb73-45b7-9ed8-c8975b791a4c","name":"Increment gemini_flash_executions","credentials":{"redis":{"id":"AfgIqWjfLKZzroBz","name":"Redis db 1"}}},{"parameters":{"model":"openai/gpt-oss-20b","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGroq","typeVersion":1,"position":[4080,288],"id":"b1263c1d-a8a5-4614-b62e-698add9971d5","name":"gpt-oss-20b","credentials":{"groqApi":{"id":"O96xwS87rH9Z1k9e","name":"Groq - main"}}}],"connections":{"Every day at 9am":{"main":[[{"node":"Fetch yesterday's issues","type":"main","index":0}]]},"Fetch last week's issues":{"main":[[{"node":"Parse issues","type":"main","index":0}]]},"Fetch yesterday's issues":{"main":[[{"node":"Parse issues","type":"main","index":0}]]},"Parse issues":{"main":[[{"node":"Was created yesterday","type":"main","index":0}]]},"Get cached ID":{"main":[[{"node":"Merge cached response and entity","type":"main","index":1}]]},"Merge cached response and entity":{"main":[[{"node":"Hasn't been processed already","type":"main","index":0}]]},"Was created yesterday":{"main":[[{"node":"Get cached ID","type":"main","index":0},{"node":"Merge cached response and entity","type":"main","index":0}]]},"Hasn't been processed already":{"main":[[{"node":"Parse creation date","type":"main","index":0}]]},"Merge issues data":{"main":[[{"node":"Get gemini flash executions","type":"main","index":0},{"node":"Add gemini_flash_executions key","type":"main","index":0}]]},"Tavily search":{"ai_tool":[[{"node":"Agent summarizer","type":"ai_tool","index":0}]]},"Sort by creation date":{"main":[[{"node":"Merge issues data","type":"main","index":0},{"node":"Save processed ID","type":"main","index":0}]]},"Alert discord":{"main":[[]]},"Agent summarizer":{"main":[[{"node":"Rename output -> summary","type":"main","index":0}]]},"Parse creation date":{"main":[[{"node":"Sort by creation date","type":"main","index":0}]]},"Wait for the gemini API rate limit to end":{"main":[[{"node":"Delete gemini_flash_executions","type":"main","index":0},{"node":"Simplify issues details","type":"main","index":0}]]},"Rename output -> summary":{"main":[[{"node":"Alert discord","type":"main","index":0}]]},"Save processed ID":{"main":[[]]},"Clear processed IDs":{"main":[[{"node":"Get all github_bunkerweb_issue* keys","type":"main","index":0}]]},"Extract keys":{"main":[[{"node":"Delete extracted keys","type":"main","index":0}]]},"Get all github_bunkerweb_issue* keys":{"main":[[{"node":"Extract keys","type":"main","index":0}]]},"Redis":{"ai_memory":[[{"node":"Agent summarizer","type":"ai_memory","index":0}]]},"Simplify issues details":{"main":[[{"node":"Agent summarizer","type":"main","index":0}]]},"Get gemini flash executions":{"main":[[{"node":"Add gemini_flash_executions key","type":"main","index":1}]]},"Add gemini_flash_executions key":{"main":[[{"node":"If there's been 10 executions or more","type":"main","index":0}]]},"If there's been 10 executions or more":{"main":[[{"node":"Wait for the gemini API rate limit to end","type":"main","index":0}],[{"node":"Increment gemini_flash_executions","type":"main","index":0},{"node":"Simplify issues details","type":"main","index":0}]]},"Delete gemini_flash_executions":{"main":[[]]},"Increment gemini_flash_executions":{"main":[[]]},"gpt-oss-20b":{"ai_languageModel":[[{"node":"Agent summarizer","type":"ai_languageModel","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Every day at 9am":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"0feb67de-a897-4f55-85a4-6443332e2e3f","triggerCount":1,"tags":[]}